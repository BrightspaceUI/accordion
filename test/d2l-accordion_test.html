<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

		<title>d2l-accordion test</title>

		<script src="../../@babel/polyfill/browser.js"></script>
		<script src="../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
		<script src="../../wct-browser-legacy/browser.js"></script>

		<script type="module" src="../d2l-accordion.js"></script>
	</head>
	<body>
		<test-fixture id="accordion-collapse-fixture">
			<template>
				<d2l-accordion>
					<d2l-accordion-collapse title="Item 1">Test</d2l-accordion-collapse>
					<d2l-accordion-collapse title="Item 2">Test</d2l-accordion-collapse>
					<d2l-accordion-collapse title="Item 3">Test</d2l-accordion-collapse>
				</d2l-accordion>
			</template>
		</test-fixture>

		<test-fixture id="accordion-collapse-fixture-label">
			<template>
				<d2l-accordion>
					<d2l-accordion-collapse label="Item 1">Test</d2l-accordion-collapse>
					<d2l-accordion-collapse label="Item 2">Test</d2l-accordion-collapse>
					<d2l-accordion-collapse label="Item 3">Test</d2l-accordion-collapse>
				</d2l-accordion>
			</template>
		</test-fixture>

		<script type="module">
import '../d2l-accordion.js';
/* global assert */
suite('Test <d2l-accordion>', function() {
	test('<d2l-accordion> initial select state', function(done) {
		var myEl = fixture('accordion-collapse-fixture');
		flush(function() {
			expect(myEl.selected).to.not.exist;
			expect(myEl.items[0].opened).to.be.false;
			expect(myEl.items[1].opened).to.be.false;
			expect(myEl.items[2].opened).to.be.false;
			expect(myEl.items[0].$$('.collapse-title').title).to.equal('');
			expect(myEl.items[1].$$('.collapse-title').title).to.equal('');
			expect(myEl.items[2].$$('.collapse-title').title).to.equal('');
			done();
		});
	});

	test('<d2l-accordion> state change', function(done) {
		var myEl = fixture('accordion-collapse-fixture');
		flush(function() {
			expect(myEl.items[0].opened).to.be.false;
			expect(myEl.items[1].opened).to.be.false;
			expect(myEl.items[2].opened).to.be.false;
			myEl.selected = 1;
			assert.equal(myEl.items[0].opened, false);
			assert.equal(myEl.items[1].opened, true);
			assert.equal(myEl.items[2].opened, false);
			done();
		});
	});

	test('<d2l-accordion> trigger test', function(done) {
		var myEl = fixture('accordion-collapse-fixture');
		flush(function() {
			expect(myEl.items[0].opened).to.be.false;
			myEl.items[0].$.trigger.click();
			expect(myEl.items[0].opened).to.be.true;
			done();
		});
	});

	test('<d2l-accordion> label instead of title', function(done) {
		var myEl = fixture('accordion-collapse-fixture-label');
		flush(function() {
			expect(myEl.items[0].$$('.collapse-title').title).to.equal('Item 1');
			expect(myEl.items[1].$$('.collapse-title').title).to.equal('Item 2');
			expect(myEl.items[2].$$('.collapse-title').title).to.equal('Item 3');
			done();
		});
	});
});
</script>
	</body>
</html>
